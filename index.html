<!DOCTYPE html>
<html lang="de">
<head>
  <head>
  <meta charset="UTF-8">
  <title>That's him! - Ultra Edition</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.png" type="image/png">
  <meta name="theme-color" content="#6200ea">
  <style>
    /* hier bleibt dein gesamtes CSS */
  </style>
</head>
  <style>
    body {<div id="splash" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#6200ea;color:white;display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:1000;">
  <h1 style="font-size:50px;">üéâ That's him! üéâ</h1>
  <p>Bereit f√ºr Spa√ü...</p>
</div>

      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      transition: background 0.5s, color 0.5s;
    }
    body.light {
      background-color: #ffffff;
      color: #000000;
    }
    body.dark {
      background-color: #121212;
      color: #f1f1f1;
    }
    h1 {
      font-size: 48px;
      margin-bottom: 10px;
    }
    #question {
      font-size: 24px;
      margin: 20px 0;
    }
    #players {
      margin: 20px 0;
    }
    .player-btn {
      background: #6200ea;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.3s;
    }
    .player-btn:hover {
      background: #3700b3;
      transform: scale(1.1) rotate(2deg);
    }
    #next-btn, #start-btn, #mode-btn {
      margin-top: 20px;
      padding: 10px 25px;
      font-size: 20px;
      background: #03dac6;
      color: black;
      border: none;
      border-radius: 12px;
      cursor: pointer;
    }
    #timer {
      font-size: 20px;
      margin: 10px;
      color: #bb86fc;
    }
    #result {
      margin-top: 20px;
      font-size: 24px;
      color: #03dac6;
    }
    .hidden {
      display: none;
    }
    #avatar-selection {
      margin: 20px 0;
    }
    .avatar-btn {
      font-size: 30px;
      margin: 5px;
      cursor: pointer;
      background: none;
      border: none;
    }
  </style>
</head>

<body class="light">

  <h1>That's him! üéâ</h1>

  <div id="question">Willkommen!</div>

  <div id="timer" class="hidden"></div>

  <div id="players"></div>

  <div id="avatar-selection" class="hidden"></div>

  <button id="start-btn" onclick="startGame()">Start</button>
  <button id="next-btn" onclick="nextQuestion()" class="hidden">N√§chste Frage</button>
  <button id="mode-btn" onclick="toggleMode()">üåó Modus wechseln</button>

  <div id="result" class="hidden"></div>

  <audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>
  <audio id="winSound" src="https://www.soundjay.com/human/sounds/applause-8.mp3" preload="auto"></audio>

  <canvas id="confetti-canvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;" class="hidden"></canvas>

  <script>
    // Splashscreen automatisch ausblenden
window.onload = function() {
  setTimeout(() => {
    document.getElementById('splash').style.display = 'none';
  }, 1500); // Splashscreen 1,5 Sekunden
};
    let defaultQuestions = [
      "Wer w√ºrde am ehesten sein Handy im Klo versenken?",
      "Wer w√ºrde am ehesten nackt durch die Stadt laufen?",
      "Wer w√ºrde am ehesten eine Reality-Show gewinnen?",
      "Wer w√ºrde am ehesten einen Tag lang miauen?",
      "Wer w√ºrde am ehesten vergessen, wo sein Auto geparkt ist?",
      "Wer w√ºrde am ehesten in einer Band spielen?"
    ];

    let players = [];
    let avatars = [];
    let scores = {};
    let questions = [];
    let currentQuestion = "";
    let timer;
    let countdown = 15;

    const allEmojis = ["üòé", "ü§°", "ü¶Ñ", "üêâ", "üßô‚Äç‚ôÇÔ∏è", "üê±‚Äçüë§", "üéÉ", "üßõ", "üëª", "ü§ñ", "üê∏", "ü¶ñ", "üëë", "üöÄ", "üê±", "üê∂", "ü¶ä", "üêº", "üêµ", "üêß", "ü¶ã", "üê¢", "üêô"];

    function startGame() {
      players = prompt("Gib die Spielernamen ein, getrennt durch Kommas (z.B. Max, Sarah, Lisa)").split(",").map(name => name.trim()).filter(name => name.length > 0);
      if (players.length < 2) {
        alert("Mindestens 2 Spieler werden ben√∂tigt!");
        return;
      }
      players.forEach(p => scores[p] = 0);
      selectAvatars();
    }

    function selectAvatars() {
      document.getElementById('question').innerText = "W√§hlt eure Avatare!";
      document.getElementById('avatar-selection').classList.remove('hidden');
      document.getElementById('players').innerHTML = "";
      let html = "";
      allEmojis.forEach(emoji => {
        html += `<button class="avatar-btn" onclick="chooseAvatar('${emoji}')">${emoji}</button>`;
      });
      document.getElementById('avatar-selection').innerHTML = html;
    }

    function chooseAvatar(emoji) {
      avatars.push(emoji);
      allEmojis.splice(allEmojis.indexOf(emoji), 1);
      if (avatars.length >= players.length) {
        startQuestions();
      } else {
        selectAvatars();
      }
    }

    function startQuestions() {
      questions = [...defaultQuestions];
      shuffleArray(questions);
      document.getElementById('avatar-selection').classList.add('hidden');
      document.getElementById('start-btn').classList.add('hidden');
      document.getElementById('next-btn').classList.remove('hidden');
      nextQuestion();
    }

    function nextQuestion() {
      clearInterval(timer);
      document.getElementById('timer').classList.remove('hidden');
      countdown = 15;
      updateTimer();

      if (questions.length === 0) {
        endGame();
        return;
      }
      currentQuestion = questions.pop();
      document.getElementById('question').innerText = currentQuestion;

      let playersHtml = '';
      players.forEach((player, index) => {
        playersHtml += `<button class="player-btn" onclick="selectPlayer('${player}')">${avatars[index]} ${player}</button>`;
      });
      document.getElementById('players').innerHTML = playersHtml;

      timer = setInterval(() => {
        countdown--;
        updateTimer();
        if (countdown <= 0) {
          clearInterval(timer);
          alert("Zeit abgelaufen! üò¨");
          nextQuestion();
        }
      }, 1000);
    }

    function updateTimer() {
      document.getElementById('timer').innerText = `‚è≥ Zeit: ${countdown}s`;
    }

    function selectPlayer(playerName) {
      document.getElementById('clickSound').play();
      scores[playerName]++;
      alert(`${playerName} wurde gew√§hlt! üéâ (+1 Punkt)`);
      nextQuestion();
    }

    function endGame() {
      document.getElementById('players').innerHTML = "";
      document.getElementById('next-btn').classList.add('hidden');
      document.getElementById('timer').classList.add('hidden');
      document.getElementById('question').innerText = "Spiel beendet! üéä";
      document.getElementById('result').classList.remove('hidden');
      
      const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
      let resultHtml = "<h2>üèÜ Highscore:</h2><ul>";
      sorted.forEach(([player, points]) => {
        resultHtml += `<li>${player}: ${points} Punkte</li>`;
      });
      resultHtml += "</ul>";
      document.getElementById('result').innerHTML = resultHtml;

      launchConfetti();
      document.getElementById('winSound').play();
    }

    function toggleMode() {
      document.body.classList.toggle('dark');
      document.body.classList.toggle('light');
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function launchConfetti() {
      const confettiCanvas = document.getElementById('confetti-canvas');
      confettiCanvas.classList.remove('hidden');
      const ctx = confettiCanvas.getContext('2d');
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
      
      let pieces = [];
      for (let i = 0; i < 100; i++) {
        pieces.push({x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r: Math.random()*20+5, d: Math.random()*5+2});
      }

      function draw() {
        ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
        pieces.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fillStyle = `hsl(${Math.random()*360}, 100%, 50%)`;
          ctx.fill();
          p.y += p.d;
          if (p.y > window.innerHeight) p.y = 0;
        });
        requestAnimationFrame(draw);
      }
      draw();
    }
  </script>


</body>
</html>
